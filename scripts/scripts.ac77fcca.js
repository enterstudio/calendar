"use strict";angular.module("calendarApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","xeditable","cgBusy"]).config(["$locationProvider","$routeProvider",function(a,b){b.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]).run(["$anchorScroll","editableOptions",function(a,b){a.yOffset=60,b.theme="bs3"}]),$(function(){$.scrollUp({scrollName:"scrollUp",scrollDistance:105,scrollFrom:"top",scrollSpeed:300,easingType:"linear",animation:"fade",animationSpeed:200,scrollTrigger:!1,scrollTarget:!1,scrollText:"Top",scrollTitle:"Back to the top",activeOverlay:"#FF0000",zIndex:2147483647})}),angular.module("calendarApp").controller("MainCtrl",["$scope","$location","$anchorScroll","$filter","Calendar",function(a,b,c,d,e){a.$watch("year",function(b){a.calendar=e.query({year:b}),a.previousYear=b-1,a.nextYear=b+1}),a.year=(new Date).getFullYear();var f=Array.apply(null,{length:2051}).map(Number.call,Number).splice(1900,151);a.years=f.map(function(a){return{value:a,text:a}}),a.showYear=function(){var b=d("filter")(a.years,{value:a.year});return a.year&&b.length?b[0].text:"Not set"},a.previous=function(){console.log("previous"),a.year=a.year-1},a.next=function(){console.log("next"),a.year=a.year+1},a.scrollTo=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)}}]),angular.module("calendarApp").directive("month",["utils",function(a){return{restrict:"E",replace:!0,templateUrl:"views/month.html",link:function(b){var c={0:"ഞായർ     ",1:"തിങ്കൾ   ",2:"ചൊവ്വ    ",3:"ബുധൻ     ",4:"വ്യാഴം   ",5:"വെള്ളി   ",6:"ശനി      "},d=b.month,e=b.weeks=[],f=d.days.map(function(a){return a.malayalamMonth}),g=a.unique(f);b.malayalamMonthNames=g.join(" - ");var h=d.days.map(function(a){return a.malayalamYear}),i=a.unique(h);b.malayalamYears=i.join(" - ");for(var j=0;j<d.days.length;j++){if((0===e.length||7===e[e.length-1].length)&&e.push([]),1===d.days[j].date){for(var k=Object.keys(c),l=0,m=0;m<k.length;m++){var n=k[m];if(d.days[j].weekdayName===c[n]){l=n;break}}for(var o=0;l>o;o++)e[e.length-1].push({})}if(e[e.length-1].push(d.days[j]),j===d.days.length-1)for(var p=0,q=7-e[e.length-1].length;q>p;p++)e[e.length-1].push({})}}}}]),angular.module("calendarApp").factory("Calendar",["$resource","serviceConfigConstant",function(a,b){return a(b.baseUrl+"years/:year?lang=ml",{},b.config)}]),angular.module("calendarApp").constant("serviceConfigConstant",{baseUrl:"http://calendar.kollavarsham.org/api/",config:{query:{method:"GET",isArray:!1,headers:{Accept:"application/json"}}}}),angular.module("calendarApp").service("utils",function(){this.unique=function(a){return a.filter(function(b,c){return a.indexOf(b)===c})}}),angular.module("calendarApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="root" ng-controller="MainCtrl"> <div id="year-nav"> <span class="left year-nav"> <a ng-click="previous()"> &lt; {{previousYear}} </a> </span> <a href="#" editable-select="year" data-e-ng-options="s.value as s.text for s in years" title="Click to change the year" buttons="no" class="year-select"> {{ showYear() }} </a> <span class="right year-nav"> <a ng-click="next()"> {{nextYear}} &gt; </a> </span> </div> <div> <ul class="month-nav"> <li ng-repeat="month in calendar.months"> <span class="month-nav-sep" ng-show="$first"> | </span> <a ng-click="scrollTo(\'month-{{month.name}}\')" title="{{month.name}}">{{month.name | limitTo: 3}}</a> <span class="month-nav-sep"> | </span> </li> </ul> </div> <div cg-busy="calendar"></div> <div class="calendar-container"> <div ng-repeat="month in calendar.months" id="{{ \'month-\' + month.name }}" class="calendar-month"> <h2 class="clearfix"> <span class="month-name">{{month.name}}</span> <small ng-show="!$first"><a ng-click="scrollTo(\'year-nav\')">Back to Top</a></small> <div class="malayalam-month-year"> <div class="malayalam-year">{{malayalamYears}}</div> <div class="malayalam-month">{{malayalamMonthNames}}</div> </div> </h2> <month ng-model="month"></month> </div> </div> </div>'),a.put("views/month.html",'<table class="calendar"> <colgroup span="7"></colgroup> <tbody> <tr class="head"> <th scope="col" title="Sunday" class="sunday">S</th> <th scope="col" title="Monday">M</th> <th scope="col" title="Tuesday">T</th> <th scope="col" title="Wednesday">W</th> <th scope="col" title="Thursday">T</th> <th scope="col" title="Friday">F</th> <th scope="col" title="Saturday">S</th> </tr> <tr ng-repeat="week in weeks"> <td ng-repeat="day in week"> <div class="day" ng-class="$first ? \'sunday\' : \'\'"> <div class="gregorian">{{day.date}}</div> <div class="malayalam-day">{{day.malayalamDay}}</div> <div class="naksatra">&#160; {{day.naksatra}}</div> </div> </td> </tr> </tbody> </table>')}]);